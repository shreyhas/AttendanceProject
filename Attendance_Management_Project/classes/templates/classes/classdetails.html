<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <title>{{class_name}}</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Shreyhas Yachamaneni">
  <script src="float-panel.js"></script>

  <!-- CSS Import -->
  <link rel="stylesheet" href="{% static 'bootstrap_3.4/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/customstyle.css' %}">
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet" type = "text/css">

  <!-- js import -->
  <script src="{% static 'bootstrap_3.4/js/bootstrap.min.js' %}"></script>

  <!-- jQuery import -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>


</head>

<body>

<!-- Navbar -->
<div class = 'container-fluid'>
<nav class = 'navbar'>
  <!-- Navbar Logo -->
  <div class="navbar-header">
     <a class="navbar-brand" href="{% url 'loginview' %}">
       <img src = "{% static 'images/Logo.png' %}" alt = "Logo" style="width:60px;height:50px;">
     </a>
  </div>
  <u1 class = "nav navbar-nav">
     <li><a href = "#">Class ID: {{class_id}}</a></li>
     <li><a href = "#">Class: {{class_name}}</a></li>
     <li><a href = #>Teacher: {{teacher_name}}</a></li>
  </u1>
  <u1 class = "nav navbar-nav navbar-right">
    <li class = "dropdown">
      <a class = "dropdown-toggle" data-toggle="dropdown" href = "">{{name}}<span class = "caret"></span></a>
    <ul class = "dropdown-menu">
      <li><a href = "#">User ID: {{user_id}}</a></li>
      <li><a href = #>{{rolename}}</a></li>
      <li><a class = 'btn btn-danger' href = "{% url 'logout' %}">Sign Out</a></li>
    </ul>
    </li>

  </u1>
</nav>
</div>

<div class = 'container padding-up'>

<div class = 'row'>
  <!-- Student List-->
  <div class = 'col-lg-8'>

    <div class="text-center">
    <h4><strong>{{date}}</strong></h4>
    </div>

    <form method = "post" action = "{% url 'save' class_id %}" enctype="multipart/form-data">
    {% csrf_token %}
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Present</th>
        </tr>
      </thead>
      <tbody>
        {% csrf_token %}
        {% for cs in classstudents %}
          <tr>
            <th scope="row">{{cs.student.id}}</th>
            <td>{{cs.student.name}}</td>
            <td><input id="student{{cs.student.id}}" name = 'attendance' value = {{cs.student.id}}
                       type = 'checkbox' {% if cs.attendance %} checked {% endif %}>

            </td>
          </tr>
        {% endfor %}

      </tbody>
    </table>
    <button class = 'btn btn-primary' type = 'submit'>Save</button>
    </form>


    <br>


  </div>

  <!-- Other -->
  <div class = 'col-lg-4 text-center'>
    <div class = 'row'>

    <!-- Data Viz -->
    <div class = 'row'>

      <figure class="highcharts-figure">
      <div id="container"></div>
      </figure>
      <script>
        Highcharts.chart('container', {
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: 0,
        plotShadow: false
    },
    title: {
        text: 'Present<br>vs.<br>Absent',
        align: 'center',
        verticalAlign: 'middle',
        y: 60
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    accessibility: {
        point: {
            valueSuffix: '%'
        }
    },
    plotOptions: {
        pie: {
            dataLabels: {
                enabled: true,
                distance: -50,
                style: {
                    fontWeight: 'bold',
                    color: 'white'
                }
            },
            startAngle: -90,
            endAngle: 90,
            center: ['50%', '75%'],
            size: '110%'
        }
    },
    series: [{
        type: 'pie',
        name: '',
        innerSize: '50%',
        data: [
            ['Present', 100],
            ['Absent', 3.02],
            {
                name: 'Other',
                y: 7.61,
                dataLabels: {
                    enabled: false
                }
            }
        ]
    }]
});
      </script>
      <div class = 'panel panel-default'>Attendance Policy Data Vizualization Here</div>
    </div>
    <!-- Notifications -->
    <div class = 'row'>
      <div class = 'panel panel-default'>Notifications</div>
    </div>
  </div>
</div>
</div>



<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</body>